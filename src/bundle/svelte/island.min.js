const e=new WeakSet,t=new Map,n=JSON.parse(document.querySelector('[data-context="%DEPLOY_HASH%"]')?.textContent??"{}");class s extends HTMLElement{constructor(){super()}async connectedCallback(){if(e.has(this))return;e.add(this);const{island:s}=this.dataset,a=t.get(s)??0;if(t.set(s,a+1),this.parentNode.closest("dinossr-island"))return;const r=new Map(Object.entries(structuredClone(n)));r.set("url",new URL(n.url,window.location.href));const o=`[data-island="${s}"][type*="/json"]`,c=document.querySelectorAll(o).item(a),d=c?JSON.parse(c.textContent):{},i=await import(`/_/immutable/${s}.js`),l=document.createDocumentFragment(),u=document.createElement("div");this.replaceWith(u),l.appendChild(this),new i.default({context:r,props:d,target:l,hydrate:!0}),u.replaceWith(l)}}customElements.define("dinossr-island",s);
